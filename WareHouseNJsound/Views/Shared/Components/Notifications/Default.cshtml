@model WareHouseNJsound.ViewComponents.NotificationsViewComponent.NotificationBellVM

<div class="dropdown me-3">
    <button class="btn btn-link text-white position-relative p-0"
            type="button" id="notifDropdown" data-bs-toggle="dropdown" aria-expanded="false">
        <i class='bx bx-bell bx-sm'></i>
        @if (Model.Count > 0)
        {
            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                @Model.Count
            </span>
        }
    </button>

    <ul class="dropdown-menu dropdown-menu-end shadow" aria-labelledby="notifDropdown" style="min-width:300px;">
        <li class="dropdown-header fw-semibold">การแจ้งเตือน</li>
        @if (Model.Items.Any())
        {
            @foreach (var n in Model.Items)
            {
                <li>
                    <a class="dropdown-item small d-flex align-items-start gap-2"
                       href="@Url.Action("Go","Notifications", new { id = n.Id })">
                        <i class='bx bx-bell mt-1'></i>
                        <span>
                            <div class="fw-semibold">@n.Title</div>
                            <div class="text-muted small">@n.Message</div>
                            <div class="text-muted small">@n.CreatedAt.ToString("dd/MM/yyyy HH:mm")</div>
                        </span>
                    </a>
                </li>
            }
        }
        else
        {
            <li><span class="dropdown-item text-muted small">ยังไม่มีการแจ้งเตือน</span></li>
        }
    </ul>
</div>
